package gql

// This file will be automatically regenerated based on the schema, any resolver implementations
// will be copied through when generating and any unknown code will be moved to the end.
// Code generated by github.com/99designs/gqlgen version v0.17.46

import (
	"context"
	"fmt"

	"github.com/jhana-app/jhana-app/ent"
	"github.com/jhana-app/jhana-app/ent/dataloaders"
	"github.com/jhana-app/jhana-app/ent/gqlid"
	"go.uber.org/zap"
)

// LessonID is the resolver for the lessonId field.
func (r *lessonTechniqueResolver) LessonID(ctx context.Context, obj *ent.LessonTechnique) (*gqlid.Base64ID, error) {
	return obj.LessonID.Base64ID(), nil
}

// TechniqueID is the resolver for the techniqueId field.
func (r *lessonTechniqueResolver) TechniqueID(ctx context.Context, obj *ent.LessonTechnique) (*gqlid.Base64ID, error) {
	return obj.TechniqueID.Base64ID(), nil
}

// Technique is the resolver for the technique field.
func (r *lessonTechniqueResolver) Technique(ctx context.Context, obj *ent.LessonTechnique) (*ent.Technique, error) {
	technique, err := dataloaders.MustGet(ctx).Technique.Load(obj.TechniqueID)
	if err != nil {
		r.logger.Error("failed to get technique", zap.Error(err), zap.Int64("technique_id", obj.TechniqueID.ID))
		return nil, fmt.Errorf("internal server error")
	}

	return technique, nil
}

// LessonTechnique returns LessonTechniqueResolver implementation.
func (r *Resolver) LessonTechnique() LessonTechniqueResolver { return &lessonTechniqueResolver{r} }

type lessonTechniqueResolver struct{ *Resolver }
